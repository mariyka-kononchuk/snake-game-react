(this["webpackJsonpsnake-game-react"]=this["webpackJsonpsnake-game-react"]||[]).push([[0],{16:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a.n(s),o=a(10),r=a.n(o),c=(a(15),a(16),a(8)),i=a(4),l=a(5),u=a(7),h=a(6),d=a(0),m=function(t){return Object(d.jsx)("div",{children:t.snakeDots.map((function(t,e){var a={left:"".concat(t[0],"%"),top:"".concat(t[1],"%")};return Object(d.jsx)("div",{className:"snake-dot",style:a},e)}))})},v=function(t){console.log("left",t.dot[0]),console.log("top",t.dot[1]),console.log("all",t.dot);var e={left:"".concat(t.dot[0],"%"),top:"".concat(t.dot[1],"%")};return Object(d.jsx)("div",{className:"snake-food",style:e})},f=a(3),b=a.n(f),j=function(t){var e=t.score,a=t.name;return Object(d.jsxs)("div",{className:b.a.bar,children:[Object(d.jsxs)("p",{className:b.a.name,children:["Name: ",a]}),Object(d.jsxs)("p",{className:b.a.score,children:["Score:",e]}),Object(d.jsxs)("p",{className:b.a.high_score,children:["High-score:",e]})]})},k=a(2),g=a.n(k),p=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))).state={name:""},t.handleChange=function(e){t.setState({name:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),t.setState({name:e.target.value}),t.props.onCreateNewPlayer(t.state),t.reset()},t.reset=function(){t.setState({name:""}),t.setState({status:""})},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.name;return Object(d.jsxs)("form",{onSubmit:this.handleSubmit,className:g.a.form,children:[Object(d.jsxs)("label",{className:g.a.label,children:[Object(d.jsx)("span",{className:g.a.title,children:"Enter your name"}),Object(d.jsx)("input",{className:g.a.input,type:"text",name:"name",value:t,onChange:this.handleChange,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0})]}),Object(d.jsx)("button",{className:g.a.button,type:"submit",children:"Begin game"})]})}}]),a}(s.Component),O=function(){return[2*Math.floor((98*Math.random()+1)/2),2*Math.floor((98*Math.random()+1)/2)]},S={food:O(),speed:150,direction:"RIGHT",totalScore:0,name:"",status:"start",intervalId:0,snakeDots:[[0,0],[2,0]]},y=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))).state=S,t.createNewPlayer=function(e){var a=e.name;t.setState({name:a,status:"game"}),t.startMovingSnake(),console.log(localStorage.getItem("name"))},t.onKeyDown=function(e){switch((e=e||window.event).keyCode){case 38:t.setState({direction:"UP"});break;case 40:t.setState({direction:"DOWN"});break;case 37:t.setState({direction:"LEFT"});break;case 39:t.setState({direction:"RIGHT"});break;case 32:if("game"===t.state.status)return t.setState({status:"pause"}),void t.stopMovingSnake();if("pause"===t.state.status)return t.setState({status:"game"}),void t.startMovingSnake();break;default:return}},t.moveSnake=function(){console.log("\u0437\u043c\u0435\u0439\u043a\u0430 \u0434\u0432\u0438\u0433\u0430\u0435\u0442\u0441\u044f");var e=Object(c.a)(t.state.snakeDots);console.log("dots",e);var a=e[e.length-1];switch(t.state.direction){case"RIGHT":a=[a[0]+2,a[1]];break;case"LEFT":a=[a[0]-2,a[1]];break;case"DOWN":a=[a[0],a[1]+2];break;case"UP":a=[a[0],a[1]-2];break;default:return}e.push(a),e.shift(),t.setState({snakeDots:e})},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("check"),document.onkeydown=this.onKeyDown}},{key:"componentDidUpdate",value:function(){console.log("status",this.state.status),"pause"!==this.state.status&&"game_over"!==this.state.status?(this.checkIfOutOfBorders(),this.checkIfCollapsed(),this.checkIfEat()):this.stopMovingSnake()}},{key:"startMovingSnake",value:function(){console.log("\u043d\u0430\u0447\u0430\u043b\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0437\u043c\u0435\u0439\u043a\u0438");var t=setInterval(this.moveSnake,this.state.speed);this.setState({intervalId:t})}},{key:"checkIfOutOfBorders",value:function(){var t=this.state.snakeDots[this.state.snakeDots.length-1];(t[0]>=100||t[1]>=100||t[0]<0||t[1]<0)&&this.onGameOver()}},{key:"checkIfCollapsed",value:function(){var t=this,e=Object(c.a)(this.state.snakeDots),a=e[e.length-1];e.pop(),e.forEach((function(e){a[0]===e[0]&&a[1]===e[1]&&t.onGameOver()}))}},{key:"checkIfEat",value:function(){var t=this.state.snakeDots[this.state.snakeDots.length-1],e=this.state.food;console.log("foooods",e),t[0]===e[0]&&t[1]===e[1]&&(this.setState({food:O()}),this.enlargeSnake(),this.countingPoints())}},{key:"enlargeSnake",value:function(){var t=Object(c.a)(this.state.snakeDots);t.unshift([]),this.setState({snakeDots:t})}},{key:"countingPoints",value:function(){this.setState({totalScore:this.state.totalScore+10})}},{key:"onGameOver",value:function(){this.setState({status:"game_over"});var t={name:this.state.name,score:this.state.totalScore};localStorage.setItem(t,JSON.stringify(t)),clearInterval(this.state.intervalId)}},{key:"onRestartGame",value:function(){this.setState(S)}},{key:"stopMovingSnake",value:function(){console.log("stop moving with pause"),clearInterval(this.state.intervalId)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),document.onkeydown=null}},{key:"render",value:function(){var t=this,e=this.state,a=e.status,s=e.totalScore,n=e.name,o=e.food,r=e.snakeDots;return"start"===a?Object(d.jsx)("div",{children:Object(d.jsx)(p,{onCreateNewPlayer:this.createNewPlayer})}):"game"===a||"pause"===a?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)(j,{score:s,name:n,status:a})}),Object(d.jsxs)("div",{className:"game-area",children:[Object(d.jsx)(m,{snakeDots:r}),Object(d.jsx)(v,{dot:o})]})]}):"game_over"===a?Object(d.jsx)("div",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"GAME OVER"}),Object(d.jsxs)("p",{children:["Your score ",s]}),Object(d.jsx)("button",{type:"button",onClick:function(){return t.onRestartGame()},children:"Restart game"})]})}):void 0}}]),a}(s.Component);r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.querySelector("#root"))},2:function(t,e,a){t.exports={form:"NameForm_form__3Nrv6",label:"NameForm_label__2mvyq",title:"NameForm_title__da_wE",input:"NameForm_input__1hbdH",button:"NameForm_button__2xi8l"}},3:function(t,e,a){t.exports={bar:"StatusBar_bar__HNv8u",name:"StatusBar_name__a3APu",score:"StatusBar_score__3rnNU",high_score:"StatusBar_high_score__3nc0T"}}},[[18,1,2]]]);
//# sourceMappingURL=main.0e747a00.chunk.js.map